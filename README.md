# HW-5.2-Virtualization

##  ДЗ 5.2. Системы управления виртуализацией

  Задача 1

  Выберите подходящую систему управления виртуализацией для предложенного сценария. 
  Детально опишите ваш выбор.

  Сценарии:

  1.  100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований
Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, 
репликации данных и автоматизированного механизма создания резервных копий

Варианты могут быть разные: Hyper-V, VMware, KVM. Несмотря на то что преобладает Windows, 
я бы предложил VMware:

1. Отлично работает с гостевыми ОС как Виндоус так и Линукс
2. Нет проблем для реализации программных балансировщиков нагрузки на базе Линукс
3. Совместима с СРК, например Veeam Backup который использует снепшоты Висферы для создания бекапов.

И у меня есть опыт работы с данным продуктом, очень гибкий и функциональный продукт.


2.  Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) 
инфраструктуры Linux и Windows виртуальных машин

Требование что бы решение было бесплатное ограничивает наш выбор между XEN и KVM.

Оба решения поддерживают Виндоус и Линукс гостевые ОС.

Тестирование производитнльности, например:

https://habr.com/ru/company/cloud4y/blog/282918/

показало что KVM обладает лучшей производительностью.

Соответственно выбор за KVM


3.  Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации 
Windows инфраструктуры

Требование бесплатного продукта аналогично пункту выше - KVM или XEN.

Опять выбираю KVM, во первых из за производительности, во вторых как сказано в презентации
занятия - "реализация поддержки Windows в Xen в целом хуже, чем в KVM"


4.  Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux

Так как речь идёт о тестировании, да ещё на нескольких дистрибутивах Линукс, то
можно ограничиться десктопным бесплатным решением Virtual Box. Просто, доступно и надёжно.

##  Задача 2
Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. 
Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.


1. создаётся виртуальная машина
2. создаётся ВМ с такой же ОС
3. Использование ПО третьей стороны для миграции:
	
	- Microsoft Virtual Machine Migration Toolkit (VMMT) от Veeam. Требуется остановка приложений
(https://club.cnews.ru/blogs/entry/migriruete_s_vmware_na_microsoft_hyperv_eto_stalo_vozmozhnym_blagodarya_microsoft_i_veeam)
	
	- Double-Take, миграция на лету (https://www.youtube.com/watch?v=ctA9VZopkVA&t=41s)
	- StarWind (https://www.starwindsoftware.com/starwind-v2v-converter) , конвертация ВМ
	- либо через конвертацию файлов жёстких дисков vmdk в  vhd, ПО третьей стороны

	- использование ПО от Микрософт - Virtual Machine Converter from Microsoft (MVMC) 
	(https://techgenix.com/migrate-vmware-to-hyper-v/

  Прежде чем проводить миграцию, на исходной машине надо:

	. удалить все CD
	. удалить лишнее виртуальное железо
	. почистить диски
	. удалить все снепшоты


Каких либо шагов по использованию всех преимуществ Hyper-V для Windows не нашёл, да и вероятно они  появятся
не во время миграции а уже в процессе работы на Hyper-V.

4. Тестирование новой ВМ на гипервизоре Hyper-V 



##  `Задача 3
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации

Как пример гетерогенной среды, это докер на виртуальной машине Вмваре. 
Типовая ситуация из моей практики.


Недостатки:

1. Четыре системы - Аппаратные средства, Гипервизор ВМваре, ОС Линукс, Докер
2. Большее число точек отказа
3. Большее потребление рессурсов аппаратных средств
4. Необходимо большее число компетенций специалистов

Для минимизации рисков необходимо исключить виртуализацию ВМваре.

Если бы у меня был выбор, то да создал, так как несмотря на минусы, данный вариант не ттебует отдельной
аппаратной платформы для Докер, а всё рабатоет на хостах ВМваре, которые однотипные, обеспечивают резервирование.
И наверняка в работе потребуются ещё какие то системы, их можно будет безболезнено
выделить из существующих ресурсов.




















